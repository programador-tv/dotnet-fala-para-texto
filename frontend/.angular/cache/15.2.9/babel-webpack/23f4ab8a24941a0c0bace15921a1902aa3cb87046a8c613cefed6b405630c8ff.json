{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nfunction AppComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_0_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.startRecording());\n    });\n    i0.ɵɵtext(2, \"Iniciar Grava\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AppComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2, \"Gravando...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_1_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.stopRecording());\n    });\n    i0.ɵɵtext(4, \"Interromper Grava\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AppComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"audio\", 2);\n    i0.ɵɵelementStart(2, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_2_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.playRecordedAudio());\n    });\n    i0.ɵɵtext(3, \"Reproduzir \\u00C1udio\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_2_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.sendAudio());\n    });\n    i0.ɵɵtext(5, \"Enviar\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r2.audioUrl, i0.ɵɵsanitizeUrl);\n  }\n}\nexport class AppComponent {\n  constructor(http) {\n    this.http = http;\n    this.recordedChunks = [];\n    this.isRecording = false;\n    this.audioRecorded = false;\n    this.showConsole = false;\n    this.stoppedRecord = false;\n    this.formData = new FormData();\n  }\n  startRecording() {\n    console.log(\"Gravando\");\n    this.recordedChunks = [];\n    this.isRecording = true;\n    navigator.mediaDevices.getUserMedia({\n      audio: true\n    }).then(stream => {\n      this.mediaRecorder = new MediaRecorder(stream);\n      this.mediaRecorder.ondataavailable = event => {\n        if (event.data.size > 0) {\n          this.recordedChunks.push(event.data);\n        }\n      };\n      this.mediaRecorder.onstop = () => {\n        const audioBlob = new Blob(this.recordedChunks, {\n          type: 'audio/wav'\n        });\n        this.formData.append('audioFile', audioBlob, 'recorded_audio.wav');\n        this.audioUrl = URL.createObjectURL(audioBlob);\n        this.audioRecorded = true;\n      };\n      this.mediaRecorder.start();\n    }).catch(error => {\n      console.error('Erro ao acessar o microfone: ', error);\n    });\n  }\n  stopRecording() {\n    if (this.isRecording) {\n      this.mediaRecorder.stop();\n      this.isRecording = false;\n      this.stoppedRecord = true;\n      this.audioRecorded = true;\n      this.showConsole = true;\n    }\n  }\n  clickouPararGravacao() {\n    this.audioRecorded = true;\n    //Mostra o reprodutor\n    this.showConsole = true;\n  }\n  sendAudio() {\n    return this.http.post(\"http://localhost:5076/\", this.formData).subscribe();\n  }\n  playRecordedAudio() {\n    this.showConsole = true;\n    const audioElement = new Audio(this.audioUrl);\n    // audioElement.play();\n  }\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 3,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [3, \"click\"], [\"controls\", \"\", 3, \"src\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AppComponent_div_0_Template, 3, 0, \"div\", 0);\n      i0.ɵɵtemplate(1, AppComponent_div_1_Template, 5, 0, \"div\", 0);\n      i0.ɵɵtemplate(2, AppComponent_div_2_Template, 6, 1, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", !ctx.isRecording);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isRecording);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.clickouPararGravacao && ctx.showConsole);\n    }\n  },\n  dependencies: [i2.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","AppComponent","constructor","http","FormData","startRecording","console","log","recordedChunks","isRecording","navigator","mediaDevices","getUserMedia","audio","then","stream","mediaRecorder","MediaRecorder","ondataavailable","event","data","size","push","onstop","audioBlob","Blob","type","formData","append","audioUrl","URL","createObjectURL","audioRecorded","start","catch","error","stopRecording","stop","stoppedRecord","showConsole","clickouPararGravacao","sendAudio","post","subscribe","playRecordedAudio","audioElement","Audio","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/marcosguilhermedornelesstaub/Documents/dotnet-fala-para-texto/frontend/src/app/app.component.html","/Users/marcosguilhermedornelesstaub/Documents/dotnet-fala-para-texto/frontend/src/app/app.component.ts"],"sourcesContent":["<!-- Se não está gravando, mostra o botão startRecording -->\n<div *ngIf=\"!isRecording\">\n  <button (click)=\"startRecording()\">Iniciar Gravação</button>\n</div>\n<!-- Se está gravando, mostra o texto gravando e o botão para parar de gravar -->\n<div *ngIf=\"isRecording\">\n  <p>Gravando...</p>\n  <button (click)=\"stopRecording()\">Interromper Gravação</button>\n</div>\n\n\n<!-- Se apertou pra interromper e o console foi declarado tru, exibe o console e o botão que chama o método para dar play no audio -->\n<div *ngIf=\"clickouPararGravacao && showConsole\">\n  <audio [src]=\"audioUrl\" controls></audio>\n  <button (click)=\"playRecordedAudio()\">Reproduzir Áudio</button>\n  <button (click)=\"sendAudio()\">Enviar</button>\n</div>\n\n","import { HttpClient } from '@angular/common/http';\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n\n  mediaRecorder: any;\n  recordedChunks: any[] = [];\n  isRecording = false;\n  audioRecorded = false;\n  audioUrl: string | undefined;\n  showConsole: boolean = false;\n  stoppedRecord:boolean = false;\n  formData = new FormData();\n\n  constructor(private http : HttpClient){}\n\n  startRecording() {\n    console.log(\"Gravando\")\n    this.recordedChunks = [];\n    this.isRecording = true;\n\n    navigator.mediaDevices.getUserMedia({ audio: true })\n      .then(stream => {\n        this.mediaRecorder = new MediaRecorder(stream);\n\n        this.mediaRecorder.ondataavailable = (event: { data: { size: number; }; }) => {\n          if (event.data.size > 0) {\n            this.recordedChunks.push(event.data);\n          }\n        };\n\n        this.mediaRecorder.onstop = () => {\n          const audioBlob = new Blob(this.recordedChunks, { type: 'audio/wav' });\n          this.formData.append('audioFile', audioBlob, 'recorded_audio.wav'); \n          this.audioUrl = URL.createObjectURL(audioBlob);\n          this.audioRecorded = true;\n        \n        };\n\n        this.mediaRecorder.start();\n      })\n      .catch(error => {\n        console.error('Erro ao acessar o microfone: ', error);\n      });\n  }\n\n  stopRecording() {\n    if (this.isRecording) {\n      this.mediaRecorder.stop();\n      this.isRecording = false;\n      this.stoppedRecord = true;\n      this.audioRecorded=true;\n      this.showConsole = true;\n    }\n  }\n  \n\n  clickouPararGravacao(){\n    this.audioRecorded = true;\n    //Mostra o reprodutor\n    this.showConsole = true;\n    \n  }\n\n  sendAudio() {\n    return this.http.post(\"http://localhost:5076/\",this.formData).subscribe();\n  }\n\n  playRecordedAudio() {\n    this.showConsole=true;\n    const audioElement = new Audio(this.audioUrl);\n    // audioElement.play();\n  }\n\n\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}